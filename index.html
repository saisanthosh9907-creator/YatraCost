<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>YatraCost Pro ‚Äî Trip Cost Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
body{
  margin:0;font-family:Inter;background:#0f172a;color:#e5e7eb
}
header{
  background:#020617;padding:15px 20px;display:flex;gap:12px;align-items:center
}
h1{margin:0;font-size:20px}
.container{
  max-width:1200px;margin:auto;padding:20px;
  display:grid;grid-template-columns:1fr 1fr;gap:20px
}
@media(max-width:900px){.container{grid-template-columns:1fr}}
.card{
  background:#020617;padding:20px;border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.4)
}
input,select,button{
  width:100%;padding:12px;border-radius:10px;border:none;margin-top:8px
}
button{background:#22c55e;color:#08121a;font-weight:700;cursor:pointer}
#map{height:420px;border-radius:14px;margin:20px}
.result div{margin:6px 0}
.hotel{border-bottom:1px solid #334155;padding:6px 0}
</style>
</head>

<body>

<header>
  <h1>YatraCost Pro</h1>
  <span>Map ‚Ä¢ Route ‚Ä¢ Hotels ‚Ä¢ Weather</span>
</header>

<div class="container">

<div class="card">
  <label>From</label>
  <input id="from" placeholder="Start typing city name">

  <label>Via (optional)</label>
  <input id="via" placeholder="Optional stop">

  <label>To</label>
  <input id="to" placeholder="Destination city">

  <button onclick="findRoute()">Find Route</button>

  <label>Distance (km)</label>
  <input id="distance">

  <label>Mileage (km/L)</label>
  <input id="mileage" value="18">

  <label>Fuel price (‚Çπ/L)</label>
  <input id="fuel" value="110">

  <label>Travellers</label>
  <input id="travellers" value="2">

  <label>Hotel per night (‚Çπ)</label>
  <input id="hotel" value="1500">

  <label>Nights</label>
  <input id="nights" value="1">

  <label>Food per person/day (‚Çπ)</label>
  <input id="food" value="300">

  <button onclick="calculate()">Calculate Cost</button>
</div>

<div>
  <div class="card">
    <h3>Weather</h3>
    <div id="weather">‚Äî</div>
  </div>

  <div class="card">
    <h3>Trip Summary</h3>
    <div id="result">‚Äî</div>
  </div>

  <div class="card">
    <h3>Nearby Hotels</h3>
    <div id="hotels">‚Äî</div>
  </div>
</div>

</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map=L.map("map").setView([20.59,78.96],5);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
let routeLayer, destPoint;

async function geo(q){
  const r=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}`);
  const d=await r.json(); if(!d[0]) throw "Place not found";
  return {lat:+d[0].lat,lon:+d[0].lon};
}

async function findRoute(){
  const A=from.value.trim(), B=to.value.trim(), C=via.value.trim();
  if(!A||!B){alert("Enter From & To");return;}

  const pA=await geo(A), pB=await geo(B);
  destPoint=pB;
  let pts=[pA];
  if(C) pts.push(await geo(C));
  pts.push(pB);

  const coords=pts.map(p=>`${p.lon},${p.lat}`).join(";");
  const r=await fetch(`https://router.project-osrm.org/route/v1/driving/${coords}?overview=full&geometries=geojson`);
  const d=await r.json();
  const rt=d.routes[0];

  distance.value=(rt.distance/1000).toFixed(1);
  if(routeLayer) map.removeLayer(routeLayer);
  routeLayer=L.geoJSON(rt.geometry).addTo(map);
  map.fitBounds(routeLayer.getBounds());

  loadWeather(pB.lat,pB.lon);
  loadHotels(pB.lat,pB.lon);
}

async function loadWeather(lat,lon){
  const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,wind_speed_10m`);
  const d=await r.json();
  weather.innerHTML=`${d.current.temperature_2m}¬∞C ‚Ä¢ Wind ${d.current.wind_speed_10m} km/h`;
}

async function loadHotels(lat,lon){
  const r=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=hotel&limit=5&lat=${lat}&lon=${lon}`);
  const d=await r.json();
  hotels.innerHTML="";
  d.forEach(h=>{
    hotels.innerHTML+=`<div class="hotel">üè® ${h.display_name.split(",")[0]}</div>`;
  });
}

function calculate(){
  const dist=+distance.value||0;
  const fuelCost=(dist/(+mileage.value||1))*(+fuel.value||0);
  const hotelCost=(+hotel.value||0)*(+nights.value||0);
  const foodCost=(+food.value||0)*(+travellers.value||1)*(+nights.value||0);
  const total=fuelCost+hotelCost+foodCost;

  result.innerHTML=`
    Distance: ${dist} km<br>
    Fuel: ‚Çπ${fuelCost.toFixed(0)}<br>
    Stay: ‚Çπ${hotelCost}<br>
    Food: ‚Çπ${foodCost}<br><hr>
    <b>Total: ‚Çπ${total.toFixed(0)}</b>
  `;
}
</script>

</body>
</html>
